# Số xuất hiện nhiều nhất  (Bản khó hơn)

Cho một dãy số nguyên, hãy tìm số xuất hiện nhiều nhất trong dãy số đó. (Số xuất hiện nhiều nhất là số có mặt nhiều nhất trong dãy số đó).

Nếu có nhiều số xuất hiện nhiều nhất, hãy in ra số nhỏ nhất trong số đó.

**Đầu vào**:

- Dòng đầu tiên chứa một số nguyên n (1 ≤ n ≤ 10<sup>6</sup>),

- Dòng thứ hai chứa n số nguyên a<sub>1</sub>, a<sub>2</sub>, ..., a<sub>n</sub> (-10<sup>18</sup> ≤ a<sub>i</sub> ≤ 10<sup>18</sup>).

**Đầu ra**:

- In ra số xuất hiện nhiều nhất trong dãy số đó.

**Ví dụ**:

**Ví dụ 1**:

| Đầu vào | Đầu ra |
|:---|:---|
| 6 <br> 1 2 2 3 1 2 | 2 |

**Ví dụ 2**:

| Đầu vào | Đầu ra |
|:---|:---|
| 5 <br> 1 2 2 4 4 | 2 |

